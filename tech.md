# 项目技术栈分析

## 概述

本项目是一个微博热搜爬虫与数据分析系统，集成了数据采集、处理、分析和可视化等功能。以下是对项目中使用的技术和工具的详细分析。

## 核心技术栈

### 1. 数据采集（爬虫）

- **Requests**：用于发送HTTP请求，获取微博热搜页面的静态HTML内容
- **BeautifulSoup4**：HTML解析库，用于从静态页面提取热搜数据
- **Playwright**：浏览器自动化工具，用于爬取JavaScript渲染的动态页面（实时热搜）
- **lxml**：高性能XML/HTML解析库，提供XPath支持

### 2. 数据处理与分析

- **Pandas**：数据处理和分析，提供DataFrame操作和统计计算
- **NumPy**：数值计算基础库，支持数组操作和数学函数
- **jieba**：中文分词工具，用于文本处理和关键词提取
- **SnowNLP**：中文自然语言处理库，用于情感分析和文本处理

### 3. 数据可视化

- **Matplotlib**：基础绘图库，用于生成静态图表
- **Plotly**：交互式可视化库，支持动态图表和3D图形
- **WordCloud**：词云生成库，用于可视化文本关键词频率
- **NetworkX**：复杂网络分析库，用于构建和可视化关键词关系图

### 4. Web应用框架

- **Streamlit**：数据应用开发框架，用于构建交互式Web界面
- **HTML/CSS/JavaScript**：前端技术（通过lib目录中的库支持）

### 5. 系统工具

- **JSON**：数据存储格式，用于保存爬取的数据和分析结果
- **os/sys**：Python标准库，用于文件系统操作和系统接口
- **threading**：多线程支持，用于异步任务处理

## 主要技术模块

### 1. 爬虫模块 (`src/scrap.py`)

- **静态数据爬取**：使用Requests+BeautifulSoup4解析HTML页面
- **实时数据爬取**：使用Playwright模拟浏览器行为获取动态内容
- **数据持久化**：将爬取结果保存为JSON格式文件
- **错误处理**：包含备份解析方法和异常处理机制

### 2. 数据预处理模块 (`src/data_pre_process.py`)

- **数据清洗**：去除heat=0的无效数据
- **数据标准化**：重新计算rank排序和count值
- **批量处理**：支持目录递归处理所有JSON文件

### 3. 情感分析模块 (`src/sentiment_analyzer.py`)

- **SnowNLP集成**：对微博热搜标题进行情感色彩分析
- **批量分析**：支持单个文件和整个目录的情感分析
- **结果存储**：将情感分析结果保存为结构化数据

### 4. 数据分类模块 (`src/category_classifier.py`)

- **交互式分类**：命令行界面进行人工数据分类
- **分类管理**：支持多种分类标签和批量更新
- **数据持久化**：保存分类结果到原始数据文件

### 5. 可视化模块

- **词云生成** (`src/word_cloud.py`)：基于jieba分词生成关键词词云
- **网络图分析** (`src/word_network.py`)：构建关键词共现关系网络
- **图表分析** (`src/json_analyzer.py`)：生成各类统计图表

### 6. GUI应用 (`src/gui/app.py`)

- **Streamlit框架**：构建响应式Web界面
- **交互式控件**：日期选择器、数据筛选器、图表类型选择
- **实时更新**：支持动态数据加载和实时可视化

### 7. 分析报告模块

- **热度指数计算** (`src/heat_index_calculator.py`)：计算热搜话题的综合热度
- **年度报告生成** (`src/annual_report.py`)：生成年度数据分析报告
- **随机今日热点** (`src/random_hot_today.py`)：获取历史上的今日热点

## 数据处理流程

1. **数据采集** → 爬取微博热搜数据（静态+实时）
2. **数据预处理** → 清洗、标准化、格式转换
3. **数据分析** → 情感分析、分类、统计计算
4. **可视化** → 图表生成、词云、网络图
5. **交互展示** → 通过Web界面呈现分析结果

## 项目特点

1. **双模式爬虫**：同时支持静态HTML解析和动态浏览器渲染
2. **模块化设计**：各功能模块解耦，便于维护和扩展
3. **完整数据处理流水线**：从数据采集到可视化展示的全流程
4. **交互式分析**：用户可通过GUI选择不同维度的数据分析
5. **多格式输出**：支持JSON数据、图表、词云、网络图等多种输出形式

## 技术架构优势

1. **可扩展性**：模块化设计便于添加新的数据源或分析算法
2. **稳定性**：包含错误处理、备份解析方法和数据验证
3. **易用性**：提供GUI界面和命令行工具两种使用方式
4. **性能优化**：支持批量处理和异步操作提高效率

## 依赖管理

项目使用`requirements.txt`管理Python依赖，包含精确版本约束，确保环境一致性。启动脚本`run.py`提供了环境检查和依赖安装功能。
